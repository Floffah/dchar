import "./globals.css";
import stylex, { StyleXStyles } from "@stylexjs/stylex";
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import { PropsWithChildren } from "react";

import { QueryClientProvider } from "@/providers/QueryClientProvider";
import { SourcesProvider } from "@/providers/SourcesProvider";
import { fonts } from "@/styles/fonts.stylex";
import { theme } from "@/styles/theme.stylex";

export const metadata: Metadata = {
    title: "Create Next App",
    description: "Generated by create next app",
};

const geistSans = Geist({
    variable: "--font-sans",
    subsets: ["latin"],
});

const geistMono = Geist_Mono({
    variable: "--font-mono",
    subsets: ["latin"],
});

export default function RootLayout({ children }: Readonly<PropsWithChildren>) {
    return (
        <html
            lang="en"
            {...stylex.props(styles.html, {
                "--font-sans": geistSans.style.fontFamily,
                "--font-mono": geistMono.style.fontFamily,
            } as StyleXStyles)}
        >
            <body {...stylex.props(styles.body)}>
                <QueryClientProvider>
                    <SourcesProvider>{children}</SourcesProvider>
                </QueryClientProvider>
            </body>
        </html>
    );
}

const styles = stylex.create({
    html: {
        colorScheme: "dark light",
    },
    body: {
        fontFamily: fonts.sans,
        backgroundColor: theme.background,
        color: theme.foreground,
        "-webkit-font-smoothing": "antialiased",
        "-moz-osx-font-smoothing": "grayscale",
    },
});
